<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"vikingstudyhard.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="基于ECShop进行Jmeter压力测试">
<meta property="og:type" content="article">
<meta property="og:title" content="【软件测试上机】3 JMeter压力测试">
<meta property="og:url" content="https://vikingstudyhard.github.io/2018/04/18/ST_Lab3JMeter/index.html">
<meta property="og:site_name" content="加载起来特别特别慢的小博客">
<meta property="og:description" content="基于ECShop进行Jmeter压力测试">
<meta property="og:locale">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/8AF9604ADD3B9F5BC343C0281A24E82D.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/749789654249E42B6152849C2599C5F7.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/A730CBF5258BB3694673EA52E25A1604.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/8B9DE06B31F9C7504F725AFC4A92B2F2.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/0EEAE6631F21FD89B1828A7005A959E8.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/1F4779E77A64E062838F47E62B0A652E.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/CFA154E545FD77A5CF0F76C1685B2189.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/6286AFF09834C05522C7BC7D374135B7.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/B976316729A3024A4DACB5C2B97243BE.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/1D8369BE585BCACD827FB200F9601402.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/0BC38D83B237881462BD039EBDF244DD.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/6AF64E17CE1A9D2EC0657788C0ED5EFB.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/415AFCD4F3A43E1D67EC24022A83BA18.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/E6916F5D44C4BD44A1F2DE60D036A963.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/E24CAE1AA5262C3813A6851ADA1FBA47.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/4D61701824E117ABE665F6DCBA910E76.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/3AC090A4BA236E04BA461648F089767C.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/7AF5D096756C5EBDF54E02E767090AED.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/6CD6891BFA057DFC1CA6D8FB1FBC72EA.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/77FB4338D10F0806E40122DB82D511A5.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/4C7EF0F73029004F664A52BA9CEBFF91.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/E0AA4D1EEDDEBE12942FC3BCB38742C2.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/3FB0668999F4E97FE41219CA032136F8.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/AB76E10ECA033C66EF23A786981D1341.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/1C6F867AB0441CDE4EF6CC60E9CCF119.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/A631B4B20FFB813EF4B93E9A29ED03E4.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/5461C7B7ED0754FE0CE5C0B557B1447D.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/1E332468AFD073FE79EA9ADDA0FD3426.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/CFACEF9EA4A26E61CC65E991EFC86D05.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/45804C621AB5CC55F3C15744A3629285.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/FB92B59D9B89716CF98BD3AF5FC2C8CF.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/6C78BC5210E9E95E9CBD48046418DD20.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/E90CD22DF7CB138CF1BDF7BAE71817C0.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/F18C7E0156921940780985A728B08CAF.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/5918A96AD9542AA8E8592A9B412DB7F1.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/E25EED4E78461A22A91B65D6EC7B4DAC.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/770BB61FCCBFE7CE1C7E0F3942535002.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/1A4E0AF8D0582B6EB9C2951B5D831A01.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/90DA88A5B37D07BADA504DD4E0949B3B.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/229B24C589D6F892931FB0915FBACF34.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/D606D4F984B61ACB9FF839E020FB4AF7.jpg">
<meta property="og:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/271894030CFFA2A833F56DAE478E5B87.jpg">
<meta property="article:published_time" content="2018-04-17T16:00:00.000Z">
<meta property="article:modified_time" content="2021-05-11T06:56:58.521Z">
<meta property="article:author" content="VikingWang">
<meta property="article:tag" content="SoftwareTest">
<meta property="article:tag" content="软件测试上机">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://vikingstudyhard.github.io/images/ST_Lab3JMeter/8AF9604ADD3B9F5BC343C0281A24E82D.jpg">

<link rel="canonical" href="https://vikingstudyhard.github.io/2018/04/18/ST_Lab3JMeter/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-Hans'
  };
</script>

  <title>【软件测试上机】3 JMeter压力测试 | 加载起来特别特别慢的小博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">加载起来特别特别慢的小博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">图片墙第一弹第二弹欢迎惠顾！</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-photo">

    <a href="/photo/" rel="section"><i class="fa fa-camera fa-fw"></i>photo</a>

  </li>
        <li class="menu-item menu-item-photo2">

    <a href="/photo2/" rel="section"><i class="fa fa-camera fa-fw"></i>photo2</a>

  </li>
        <li class="menu-item menu-item-friends">

    <a href="/friends/" rel="section"><i class="fa fa-rocket fa-fw"></i>friends</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://vikingstudyhard.github.io/2018/04/18/ST_Lab3JMeter/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.JPG">
      <meta itemprop="name" content="VikingWang">
      <meta itemprop="description" content="这是一个需要耐心等着加载的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="加载起来特别特别慢的小博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          【软件测试上机】3 JMeter压力测试
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-04-18 00:00:00" itemprop="dateCreated datePublished" datetime="2018-04-18T00:00:00+08:00">2018-04-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-05-11 14:56:58" itemprop="dateModified" datetime="2021-05-11T14:56:58+08:00">2021-05-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95/" itemprop="url" rel="index"><span itemprop="name">软件测试</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95/%E6%9C%AC%E7%A7%91%E8%AF%BE%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">本科课程</span></a>
                </span>
            </span>

          
            <div class="post-description">基于ECShop进行Jmeter压力测试</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="实验目标"><a href="#实验目标" class="headerlink" title="实验目标"></a>实验目标</h1><p>安装虚拟机，并安装一套LAMP（Linux+Apache+Mysql+PHP）待测系统，推荐<a target="_blank" rel="noopener" href="http://www.ecshop.com/">ECShop</a>，基于此进行Jmeter压力测试，并在测试后得出Jmeter测试报告，并根据sysstat得出Linux服务器的CIMN（CPU、IO、Memory以及Network）的性能。</p>
<h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><h2 id="看教程视频"><a href="#看教程视频" class="headerlink" title="看教程视频"></a>看教程视频</h2><h2 id="下载-CentOS"><a href="#下载-CentOS" class="headerlink" title="下载 CentOS"></a>下载 CentOS</h2><p><a target="_blank" rel="noopener" href="https://www.centos.org/download/">Download CentOS</a><br>主界面上有三个不同的镜像文件类型的CentOS，分别为DVD ISO、Everything ISO、Minimal ISO。</p>
<ul>
<li>DVD ISO：此镜像类型为普通光盘安装版，可离线安装到计算机硬盘上，包含大量的常用软件，一般选择这种镜像类型即可。</li>
<li>Everything ISO：这个镜像涵盖了上种镜像的内容，并对其进行补充，集成了所有软件。</li>
<li>Minimal ISO：这个版本为精简版的镜像，可以安装一个基本的CentOS系统，包含了可启动系统基本所需的最小安装包。</li>
</ul>
<p>选择DVD ISO，得到 CentOS-7-x86_64-DVD-1708.iso (4.52G)</p>
<h2 id="安装-CentOS-7-虚拟机"><a href="#安装-CentOS-7-虚拟机" class="headerlink" title="安装 CentOS 7 虚拟机"></a>安装 CentOS 7 虚拟机</h2><p>VMware Fusion 专业版 10.0.1<br>文件 -&gt; 新建 -&gt; 拖入下载的IOS文件 -&gt; … -&gt; 储存<br>出现黑色的界面，安装开始。<br>选择语言、在网络和主机名中打开以太网、选择输入法、在软件选择中，若选择“最小安装”，即命令行界面；若想有界面则选择“GNOME桌面”、选择安装位置、最后选择安装。<br>设置root密码和创建一个用户，开始安装。</p>
<p>重启登录系统。（按提示往下做就好了）</p>
<h2 id="安装-MySQl"><a href="#安装-MySQl" class="headerlink" title="安装 MySQl"></a>安装 MySQl</h2><p>1.安装<br>CentOS担心使用MySQL会引来版权问题，所以改为集成MariaDB，所以<code>yum install mysql</code>安装的是mariadb-5.5.56-2.el7.x86_64，我们要下载并安装MySQL官方的 Yum Repository</p>
<p><code>wget -i -c http://dev.mysql.com/get/mysql57-community-release-el7-10.noarch.rpm</code>直接下载安装用的Yum Repository，大概25KB的样子，然后就可以直接yum安装了。</p>
<p><code>yum -y install mysql57-community-release-el7-10.noarch.rpm</code>之后就开始安装MySQL服务器。</p>
<p><code>yum -y install mysql-community-server</code> 安装完成后就会覆盖掉之前的mariadb。</p>
<p>2.启动MySQL服务 <code>systemctl start  mysqld.service</code></p>
<p>3.查看MySQL运行状态 <code>systemctl status mysqld.service</code><br>运行状态如图：<br><img src="/images/ST_Lab3JMeter/8AF9604ADD3B9F5BC343C0281A24E82D.jpg" alt="test6.jpg"></p>
<p>4.此时MySQL已经开始正常运行，不过要想进入MySQL还得先找出此时root用户的密码，通过如下命令可以在日志文件中找出密码 <code>grep &quot;password&quot; /var/log/mysqld.log</code><br>得到<br><code>2018-04-19T03:33:31.430509Z 1 [Note] A temporary password is generated for root@localhost: %/XfesdJl7=j</code></p>
<p>5.如下命令进入数据库：<br><code>mysql -uroot -p</code>连接MYSQL 格式为<code>mysql -h主机地址 -u用户名 -p用户密码</code><br>输入初始密码，此时不能做任何事情，因为MySQL默认必须修改密码之后才能操作数据库<br><code>mysql&gt; set password for 用户名@localhost = password(&#39;新密码&#39;);  </code><br>一般设置后会出现<code>ERROR 1819 (HY000): Your password does not satisfy the current policy requirements</code><br>需要</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; set global validate_password_policy=0;</span><br><span class="line">mysql&gt; set global validate_password_length=1;</span><br></pre></td></tr></table></figure>
<p>再设置<code>mysql&gt; set password for 用户名@localhost = password(&#39;新密码&#39;); </code></p>
<p>6.常用命令</p>
<ul>
<li>显示当前数据库服务器中的数据库列表：<br>　　<code>mysql&gt; SHOW DATABASES;</code></li>
<li>建立数据库：<br>　　<code>mysql&gt; CREATE DATABASE 库名;</code></li>
<li>建立数据表：<br>　　<code>mysql&gt; USE 库名;</code><br>　　<code>mysql&gt; CREATE TABLE 表名 (字段名 VARCHAR(20), 字段名 CHAR(1));</code></li>
<li>删除数据库：<br>　　<code>mysql&gt; DROP DATABASE 库名;</code></li>
<li>删除数据表：<br>　　<code>mysql&gt; DROP TABLE 表名;</code></li>
<li>将表中记录清空：<br>　　<code>mysql&gt; DELETE FROM 表名;</code></li>
<li>往表中插入记录：<br>　　<code>mysql&gt; INSERT INTO 表名 VALUES (&quot;hyq&quot;,&quot;M&quot;);</code></li>
<li>更新表中数据：<br>　<code>mysql-&gt; UPDATE 表名 SET 字段名1=&#39;a&#39;,字段名2=&#39;b&#39; WHERE 字段名3=&#39;c&#39;;</code></li>
<li>用文本方式将数据装入数据表中：<br>　　<code>mysql&gt; LOAD DATA LOCAL INFILE &quot;D:/mysql.txt&quot; INTO TABLE 表名;</code></li>
<li>导入.sql文件命令：<br>　　<code>mysql&gt; USE 数据库名;</code><br>　　<code>mysql&gt; SOURCE d:/mysql.sql;</code></li>
</ul>
<p>7.进入mysql后，新建数据库<br><code>mysql&gt; CREATE DATABASE ecshop;</code></p>
<h2 id="安装-php"><a href="#安装-php" class="headerlink" title="安装 php"></a>安装 php</h2><p><code>yum install php</code></p>
<p>编辑配置文件<code>vim /etc/php.ini</code><br><code>;date.timezone =</code>把前面的分号去掉，改为<code>date.timezone = PRC</code></p>
<p>安装php的扩展<br><code>yum install php-mysql php-gd php-imap php-ldap php-odbc php-pear php-xml php-xmlrpc</code></p>
<h2 id="性能测试相关工具"><a href="#性能测试相关工具" class="headerlink" title="性能测试相关工具"></a>性能测试相关工具</h2><h3 id="top-监控每一个进程的资源占用"><a href="#top-监控每一个进程的资源占用" class="headerlink" title="top 监控每一个进程的资源占用"></a>top 监控每一个进程的资源占用</h3><p>桌面右键“打开终端”，输入<code>top</code><br><img src="/images/ST_Lab3JMeter/749789654249E42B6152849C2599C5F7.jpg" alt="test1.jpg"></p>
<h3 id="sysstat-统计系统的各种资源的占用情况"><a href="#sysstat-统计系统的各种资源的占用情况" class="headerlink" title="sysstat 统计系统的各种资源的占用情况"></a>sysstat 统计系统的各种资源的占用情况</h3><p>1.在终端输入<code>yum list sysstat</code><br><img src="/images/ST_Lab3JMeter/A730CBF5258BB3694673EA52E25A1604.jpg" alt="test2.jpg"></p>
<p>2.到根目录下<code>sudo cat /etc/cron.d/sysstat</code> 输入密码，可以看到文件内容<br><img src="/images/ST_Lab3JMeter/8B9DE06B31F9C7504F725AFC4A92B2F2.jpg" alt="test3.jpg"></p>
<p>3.打开该文件<code>sudo vim /etc/cron.d/sysstat</code> 把10改成1，让sa1 每隔一分钟执行一次<br><img src="/images/ST_Lab3JMeter/0EEAE6631F21FD89B1828A7005A959E8.jpg" alt="test4.jpg"></p>
<p>4.在/var/log/sa下查看sysstat的统计报告，可以看到现在只有sa18，是每分钟的报告。<br><img src="/images/ST_Lab3JMeter/1F4779E77A64E062838F47E62B0A652E.jpg" alt="test5.jpg"></p>
<h3 id="fio-评估磁盘读写性能极限"><a href="#fio-评估磁盘读写性能极限" class="headerlink" title="fio 评估磁盘读写性能极限"></a>fio 评估磁盘读写性能极限</h3><p>安装fio <code>yum install libaio-devel fio</code></p>
<h2 id="ECShop-网上商店系统"><a href="#ECShop-网上商店系统" class="headerlink" title="ECShop 网上商店系统"></a>ECShop 网上商店系统</h2><p><a target="_blank" rel="noopener" href="http://pan.baidu.com/s/1dDAJvZN">下载链接,仅供学习</a><br>1.unzip下载的ECShop压缩包得到文件夹ECShop_V2.7.3_UTF8_release1106<br>里面有docs、upgrade、upload三个子目录</p>
<ul>
<li>docs: 安装的解释说明</li>
<li>upgrade: 用于老版本的更新</li>
<li>upload: 新用户需要复制  </li>
</ul>
<p><code>sudo cp -r upload /var/www/html</code>把upload复制到/var/www/html</p>
<p>2.修改ecshop文件夹的 owner，改成apache<br><code>chown -R apache:apache /var/www/html</code></p>
<p>3.关闭防火墙firewall：<br><code>systemctl stop firewalld.service</code> 停止firewall<br><code>systemctl disable firewalld.service</code> 禁止firewall开机启动</p>
<p>4.到ecshop目录下执行 <code>php -S 0.0.0.0:1024</code></p>
<p>这时会发现：其实不用配置apache</p>
<p>访问 127.0.0.1:1024</p>
<p>出现页面<br><img src="/images/ST_Lab3JMeter/CFA154E545FD77A5CF0F76C1685B2189.jpg" alt="test7.jpg"></p>
<p>按提示填写：<br><img src="/images/ST_Lab3JMeter/6286AFF09834C05522C7BC7D374135B7.jpg" alt="test8.jpg"></p>
<p>5.安装完成后进入首页</p>
<p><img src="/images/ST_Lab3JMeter/B976316729A3024A4DACB5C2B97243BE.jpg" alt="test9.jpg"><br>出现了一大堆错误提示：</p>
<p><code>Strict Standards: Only variables should be passed by reference in /var/www/html/ecshop/includes/cls_template.php on line422</code></p>
<p>解决办法：<br>打开cls_template.php文件中发现下面这段代码：<br><code>$tag_sel = array_shift(explode(&#39; &#39;, $tag));</code><br>我的PHP版本是5.4.16，PHP5.3以上默认只能传递具体的变量，而不能通过函数返回值传递，所以这段代码中的explode就得移出来重新赋值了。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$tagArr</span> = explode(<span class="string">&#x27; &#x27;</span>, <span class="variable">$tag</span>);</span><br><span class="line"><span class="variable">$tag_sel</span> = array_shift(<span class="variable">$tagArr</span>);</span><br></pre></td></tr></table></figure>
<p>这里可以vim该文件然后<code>:set nu</code>根据行号查找<br>这样之后顶部的报错没掉了，左侧和底部的报错还需要去<a target="_blank" rel="noopener" href="http://127.0.0.1:1024/admin/index.php">ecshop的后台</a>点击清除缓存才能去除。</p>
<p><code>Strict Standards: Only variables should be passed by reference in /var/www/html/ecshop/includes/lib_main.php on line 1329</code></p>
<p>解决办法：<br>lib_main.php中，把<code>$ext = end(explode(&#39;.&#39;, $tmp));</code>修改成 </p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$tmp_arr</span>=explode(<span class="string">&#x27;.&#x27;</span>, <span class="variable">$tmp</span>);</span><br><span class="line"><span class="variable">$ext</span> = end(<span class="variable">$tmp_arr</span>);</span><br></pre></td></tr></table></figure>
<p><img src="/images/ST_Lab3JMeter/1D8369BE585BCACD827FB200F9601402.jpg" alt="test10.jpg"></p>
<h2 id="JMeter-压力测试工具"><a href="#JMeter-压力测试工具" class="headerlink" title="JMeter 压力测试工具"></a>JMeter 压力测试工具</h2><p>1.下载<a target="_blank" rel="noopener" href="https://archive.apache.org/dist/jmeter/binaries/">JMeter</a></p>
<p>2.运行jmeter<br><code>chmod +x jmeter</code><br><code>./jmeter </code><br>出现窗口<br><img src="/images/ST_Lab3JMeter/0BC38D83B237881462BD039EBDF244DD.jpg" alt="test11.jpg"></p>
<h1 id="使用JMeter"><a href="#使用JMeter" class="headerlink" title="使用JMeter"></a>使用JMeter</h1><h2 id="录制"><a href="#录制" class="headerlink" title="录制"></a>录制</h2><p>1.工作台 -&gt; 右键 添加  -&gt; 非测试元件 -&gt; HTTP代理服务器<br>需要录制的在”URL Patterns to Include”，不需要录制的在”URL Patterns to Exclude”，其中，点击“Add suggested Exclude”，显示录制时要屏蔽的内容<code>.*\.(bmp|css|js|gif|ico|jpe?g|png|swf|woff)</code>，即一些静态文件。</p>
<p>2.工作台 -&gt; 右键 添加 -&gt; 逻辑控制器 -&gt; 交替控制器</p>
<p>3.交替控制器 -&gt;  右键 添加 -&gt; 配置元件  -&gt;  HTTP请求默认值<br>它和sampler成对出现。只有先添加一个配置，才能去添加对应的sampler（请求）</p>
<p>4.交替控制器 -&gt; 右键 添加 -&gt; 逻辑控制器 -&gt; 录制控制器</p>
<p>5.HTTP代理服务器 中的 目标控制器 用于存放录制的东西，一定要选择 “工作台 &gt; 交替控制器”<br>填写Port代理服务器端口：8081。</p>
<p>6.监控数据<br>HTTP代理服务器 -&gt; 右键 添加 -&gt; 监听器 -&gt;  察看结果树</p>
<p>7.火狐浏览器配置代理服务器<br>首选项-&gt;高级-&gt;网络-&gt;设置，按下图填好，代理服务器端口号要和第5步里面一样<br><img src="/images/ST_Lab3JMeter/6AF64E17CE1A9D2EC0657788C0ED5EFB.jpg" alt="test13.jpg"></p>
<p>这时会出现这个页面：<br><img src="/images/ST_Lab3JMeter/415AFCD4F3A43E1D67EC24022A83BA18.jpg" alt="test14.jpg"></p>
<p>需要添加<a target="_blank" rel="noopener" href="http://jmeter.apache.org/usermanual/component_reference.html#HTTP%28S%29_Test_Script_Recorder">证书</a>来安装JMeterCA certificate for HTTPS recording。下面是在火狐安装certificate的过程：</p>
<p>首选项-&gt;高级项-&gt;证书-&gt;证书机构-&gt;添加<br><img src="/images/ST_Lab3JMeter/E6916F5D44C4BD44A1F2DE60D036A963.jpg" alt="test15.jpg"></p>
<p>8.点击下方的“启动”，开始录制</p>
<p>9.打开ecshop （根目录首页、点击某个手机类型、点击某个物品详情），生成的动作在 交替控制器 里出现。</p>
<p>10.点击下方的“停止”，停止录制</p>
<h2 id="回放"><a href="#回放" class="headerlink" title="回放"></a>回放</h2><p>1.测试计划 -&gt; 右键 添加 -&gt; Thread user -&gt; 线程组，命名为“线程组1”</p>
<p>2.线程组1 -&gt; 右键 添加 -&gt; 配置元件 -&gt;  HTTP请求默认值<br>里面有ip、协议、path。有了它才能添加sampler，他们成对出现。 </p>
<p>3.把刚才生成的动作复制到 线程组1 下，保持顺序。</p>
<p>4.点击线程组，设置线程数为5，循环次数为10</p>
<p>5.线程组1 -&gt; 右键 添加  -&gt; 监听器 -&gt;  聚合报告</p>
<p>6.线程组1 -&gt; 右键 添加  -&gt; 监听器 -&gt;  察看结果树</p>
<p>7.停止浏览器里的代理服务器</p>
<p>8.保存test plan，执行start，上方绿色三角</p>
<p>9.执行top<br><img src="/images/ST_Lab3JMeter/E24CAE1AA5262C3813A6851ADA1FBA47.jpg" alt="test18.jpg"></p>
<p>10.查看Aggregate Rreport 出现响应时间、数据量等。<br><img src="/images/ST_Lab3JMeter/4D61701824E117ABE665F6DCBA910E76.jpg" alt="test19.jpg"></p>
<p>查看View Result Trees<br><img src="/images/ST_Lab3JMeter/3AC090A4BA236E04BA461648F089767C.jpg" alt="test17.jpg"></p>
<h1 id="测试脚本参数化"><a href="#测试脚本参数化" class="headerlink" title="测试脚本参数化"></a>测试脚本参数化</h1><p>1.点击 /index.php 动作，其中ip和port需要参数化</p>
<p>2.点击 /category.php 动作，其中ip和port，类型id 需要参数化<br>打开左边的加号，出现HTTP Header Manager，其中referer的IP和port需要参数化</p>
<p>3.点击 /goods.php 动作，其中ip和port，货品id 需要参数化<br>打开类型动作左边的加号，出现HTTP Header Manager，referer需要参数化</p>
<p>4.线程组1 -&gt; 右键 添加 -&gt; 配置元件 -&gt; 用户定义的变量</p>
<p>点击“添加” 设置两个用户变量和对应的值：</p>
<ul>
<li>IP  127.0.0.1</li>
<li>PORT 1024</li>
</ul>
<p>5.点击三个动作的 HTTP请求，将 “web服务器”框中 ServerNameOrIP改为<code>$&#123;IP&#125;</code>，将PortNumber改为<code>$&#123;PORT&#125;</code></p>
<p>6.在类型和货品里，还需要将HTTP Header Manager中的Referer对应的值改为类似于<br><code>http://$&#123;IP&#125;:$&#123;PORT&#125;/index.php</code><br><code>http://$&#123;IP&#125;:$&#123;PORT&#125;/category.php?id=3</code><br><code>http://$&#123;IP&#125;:$&#123;PORT&#125;/goods.php?id=9</code></p>
<p>7.bin目录下新建data目录，新建catgd.csv<br>其中有三种类型</p>
<ul>
<li>GSM手机</li>
<li>双模手机</li>
<li>手机配件</li>
</ul>
<p>id分别是3，5，6</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">3,9</span><br><span class="line">5,8</span><br><span class="line">6,5</span><br></pre></td></tr></table></figure>
<p>Encoding 设为 UTF-8 without BOM</p>
<p>8.线程组1 -&gt; 右键 Add -&gt; 配置元件 -&gt; CSV Data Set Config<br>Filename:  <code>./data/catgd.csv</code><br>File encoding: <code>utf-8</code><br>Variable Names (comma delimited): <code>catid,gdid</code><br>Delimiter (use ‘u’ for lab):<code> ,</code><br>Allow quoted data?; <code>False</code><br>Recycle on EOF ?: <code>True</code><br>Stop thread on EOF ?: <code>False</code><br>Sharing mode:<code>All threads</code></p>
<p>9.点击三个动作的HTTP Request添加相应的id值</p>
<p>以/category.php为例：<br><img src="/images/ST_Lab3JMeter/7AF5D096756C5EBDF54E02E767090AED.jpg" alt="test21.jpg"></p>
<p>在HTTP信息头管理器的referer中将相应的id值相应改为<code>$&#123;catid&#125;</code>和<code>$&#123;gdid&#125;</code></p>
<p>以/category.php为例：<br><img src="/images/ST_Lab3JMeter/6CD6891BFA057DFC1CA6D8FB1FBC72EA.jpg" alt="test22.jpg"></p>
<p>10.保存，点击上方两个并排的扫帚“ClearAll”按钮清理report，Start重新执行。察看树结果都为绿。</p>
<h1 id="用PostProcessor获取响应中的关键数据"><a href="#用PostProcessor获取响应中的关键数据" class="headerlink" title="用PostProcessor获取响应中的关键数据"></a>用PostProcessor获取响应中的关键数据</h1><p>判断每个 sampler 返回的页面是否正确<br>用浏览器审查元素，比如：类型id为3的返回页面中，在“当前位置”之后检测到了“GSM手机”说明正确。</p>
<p><img src="/images/ST_Lab3JMeter/77FB4338D10F0806E40122DB82D511A5.jpg" alt="test23.jpg"></p>
<p>1.点击 /category.php -&gt; 右键 Add -&gt; 后置处理器 -&gt; CSS/JQuery Extractor<br>Reference Name:<code>ur_here</code><br>CSS/JQuery expression:<code>#ur_here a:last-child</code><br>Attribute:<code>href</code><br>Match No.(0 for Random): <code>1</code><br>Default Value:<code>na</code></p>
<p>2.点击/category.php -&gt; 右键 Add -&gt; 断言 -&gt; Bean Shell 断言，负责校验。<br>勾选“Reset bsh.Interpreter before each call”<br>Parameters (-&gt; String Parameters and String[]bsh.args)  <code> $&#123;ur_here&#125; $&#123;catid&#125;</code> 注意空格区分。</p>
<p>3.下方BeanShell脚本代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">java.util.regex.Pattern p=java.util.regex.Pattern.compile(<span class="string">&quot;id= (\\d+)&quot;</span>);</span><br><span class="line"><span class="comment">//把要定位的节点的正则表达式预编译</span></span><br><span class="line">java.util.regex.Matcher m=p.matcher(bsh.args[<span class="number">0</span>]);</span><br><span class="line"><span class="comment">//匹配器检查有多少节点匹配定义的参数</span></span><br><span class="line"><span class="keyword">boolean</span> found= m.find();<span class="comment">//查找匹配的节点</span></span><br><span class="line"><span class="keyword">if</span>(found)&#123;</span><br><span class="line">  <span class="keyword">if</span>(!m.group(<span class="number">1</span>).equals(bsh.args[<span class="number">1</span>]))&#123;<span class="comment">//group为找到的结果集</span></span><br><span class="line">  <span class="comment">//m.group(1)中的1为第一个节点，是我们要的节点。bsh.arg[1]为Beanshell Assertion的parameters的第二个参数$&#123;brandid&#125;，作为校验标准</span></span><br><span class="line">    Failure=<span class="keyword">true</span>;</span><br><span class="line">    FailureMessage = m.group(<span class="number">1</span>) + <span class="string">&quot;&lt;&gt;&quot;</span> +bsh.args[<span class="number">1</span>];<span class="comment">//当Failure为true时，可输出错误信息 </span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">  Failure = <span class="keyword">true</span>;</span><br><span class="line">  FailureMessage = <span class="string">&quot;Not Found&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>点击绿色三角运行。</p>
<p>4.保存，点击上方两个并排的扫帚“ClearAll”按钮清理report，Start重新执行。</p>
<h1 id="5-10的测试结果"><a href="#5-10的测试结果" class="headerlink" title="5*10的测试结果"></a>5*10的测试结果</h1><p>按照上述步骤得到以下结果<br>##Jmeter的Testplan展开截图为<br><img src="/images/ST_Lab3JMeter/4C7EF0F73029004F664A52BA9CEBFF91.jpg" alt="test26.jpg"></p>
<p>##察看树结果为<br><img src="/images/ST_Lab3JMeter/E0AA4D1EEDDEBE12942FC3BCB38742C2.jpg" alt="test24.jpg"></p>
<p>##聚合报告（Aggregate Report Result）截图为<br><img src="/images/ST_Lab3JMeter/3FB0668999F4E97FE41219CA032136F8.jpg" alt="test25.jpg"></p>
<h1 id="50-20的测试结果"><a href="#50-20的测试结果" class="headerlink" title="50*20的测试结果"></a>50*20的测试结果</h1><p>将线程数和循环次数改为50和20，clear清除全部，重新运行<br><img src="/images/ST_Lab3JMeter/AB76E10ECA033C66EF23A786981D1341.jpg" alt="test27.jpg"></p>
<h2 id="top"><a href="#top" class="headerlink" title="top"></a>top</h2><p><img src="/images/ST_Lab3JMeter/1C6F867AB0441CDE4EF6CC60E9CCF119.jpg" alt="test28.jpg"></p>
<p>##察看树结果为<br><img src="/images/ST_Lab3JMeter/A631B4B20FFB813EF4B93E9A29ED03E4.jpg" alt="test30.jpg"></p>
<p>##聚合报告（Aggregate Report Result）截图为<br><img src="/images/ST_Lab3JMeter/5461C7B7ED0754FE0CE5C0B557B1447D.jpg" alt="test29.jpg"></p>
<h2 id="任务数，繁重程度："><a href="#任务数，繁重程度：" class="headerlink" title="任务数，繁重程度："></a>任务数，繁重程度：</h2><p>sysstat 的统计报告在/var/log/sa，sa指的是每分钟得到的报告，sar表示的是daily summery。今天的报告是sa21。<br>运行<code>sar -q -f sa21</code>得到：<br><img src="/images/ST_Lab3JMeter/1E332468AFD073FE79EA9ADDA0FD3426.jpg" alt="test31.jpg"></p>
<p>19：56分左右时ldavg-1 &gt; ldavg-5 &gt; ldavg-15，说明这段时间CPU压力越来越大，这也正是测试执行时间，也就是刚才top截图中id为%0的时间。</p>
<h2 id="查看CPU各项指标占用的百分比"><a href="#查看CPU各项指标占用的百分比" class="headerlink" title="查看CPU各项指标占用的百分比"></a>查看CPU各项指标占用的百分比</h2><p>运行<code>sar -p -f sa21</code> 得到：<br><img src="/images/ST_Lab3JMeter/CFACEF9EA4A26E61CC65E991EFC86D05.jpg" alt="test32.jpg"><br>19：56分左右时%idle即空闲的百分比为0，%user特别高</p>
<h2 id="内存实际占用百分比"><a href="#内存实际占用百分比" class="headerlink" title="内存实际占用百分比"></a>内存实际占用百分比</h2><p>运行<code>sar -r -f sa21</code>得到：<br><img src="/images/ST_Lab3JMeter/45804C621AB5CC55F3C15744A3629285.jpg" alt="test35.jpg"><br>可以看出内存使用率一直都很高，但是19:55分56分的时候最高。</p>
<h2 id="主存-内存-与块设备-硬盘-之间换页频繁程度"><a href="#主存-内存-与块设备-硬盘-之间换页频繁程度" class="headerlink" title="主存(内存)与块设备(硬盘)之间换页频繁程度"></a>主存(内存)与块设备(硬盘)之间换页频繁程度</h2><p>运行<code>sar -B -f sa21</code> 得到：<br><img src="/images/ST_Lab3JMeter/FB92B59D9B89716CF98BD3AF5FC2C8CF.jpg" alt="test33.jpg"><br>可以看出，19:56分左右每秒从磁盘到内存的换页（换进）的字节数和每秒从内存到磁盘的换页（换出）的字节数都比以前大很多，意味着IO读写压力很大。当前，内存是瓶颈。</p>
<h2 id="虚拟内存中-从块设备swap区中读入-读出的页数"><a href="#虚拟内存中-从块设备swap区中读入-读出的页数" class="headerlink" title="虚拟内存中,从块设备swap区中读入/读出的页数"></a>虚拟内存中,从块设备swap区中读入/读出的页数</h2><p>运行<code>sar -w -f sa21</code>得到：<br><img src="/images/ST_Lab3JMeter/6C78BC5210E9E95E9CBD48046418DD20.jpg" alt="test36.jpg"><br>19:55分56分的时候，虚拟内存中从块设备swap区中读入的页数，以及从块设备swap区中读出的页数都很大。</p>
<h2 id="IO的频繁程度"><a href="#IO的频繁程度" class="headerlink" title="IO的频繁程度"></a>IO的频繁程度</h2><p>运行<code>sar -b -f sa21</code> 得到：<br><img src="/images/ST_Lab3JMeter/E90CD22DF7CB138CF1BDF7BAE71817C0.jpg" alt="test37.jpg"><br>19:55分的时候，每秒钟物理设备的IO请求次数、每秒钟从物理设备读入读出的请求次数、以及每秒钟从物理设备读入读出的数据都量特别大。</p>
<h2 id="扇区"><a href="#扇区" class="headerlink" title="扇区"></a>扇区</h2><p>运行<code>sar -d -f sa21</code> 得到：<br><img src="/images/ST_Lab3JMeter/F18C7E0156921940780985A728B08CAF.jpg" alt="test38.jpg"><br>可以看出，19:55分左右，%util即I/O请求占CPU的百分比很大，说明已经趋于饱和。另外，每秒钟物理设备的IO请求次数等数据也很高。</p>
<h1 id="出现的问题"><a href="#出现的问题" class="headerlink" title="出现的问题"></a>出现的问题</h1><p>1.打开sysstat文件没有权限<br><img src="/images/ST_Lab3JMeter/5918A96AD9542AA8E8592A9B412DB7F1.jpg" alt="q1.jpg"><br>问题原因：配置的时候“把自己设置为管理员”没有打勾。<br>解决方法：新建一个其他用户，这时“我的账号”就可以设置为“管理员”，新建的那个用户就可以删了，现在的账户就是管理员类型的账户了。重启后，再<code>sudo cat /etc/cron.d/sysstat</code> 输入密码就好了。</p>
<p>2.用 <code>yum list fio</code> 安装fio没有匹配的软件包<br><img src="/images/ST_Lab3JMeter/E25EED4E78461A22A91B65D6EC7B4DAC.jpg" alt="q2.jpg"><br>解决办法： <code>yum install libaio-devel fio</code></p>
<p>3.yum安装时显示 “/var/run/yum.pid 已被锁定，PID 为 xxxx 的另一个程序正在运行”<br>解决方法：<code>rm -f /var/run/yum.pid</code></p>
<p>4.apache配置繁琐<br>配置apache服务器，需要修改conf文件，但是启动没有成功。</p>
<p>解决方法：<br>从php5.4开始，引入了一个内置web服务器，可以在测试环境迅速搭建web环境而无须复杂的配置。性能肯定不如nginx和apache服务器，生成环境还是要搭建服务器。<br>URI请求会被发送到PHP所在的工作目录（Working Directory）进行处理，或者可以使用-t参数来自定义不同的目录。<br>如果未指定执行哪个PHP文件，则默认执行该目录下的index.php 或index.html。<br>用<code>php -S 0.0.0.0:1024</code> 的命令来启动，然后在浏览器中访问<code>127.0.0.1:1024</code> 。</p>
<h1 id="不该出现的问题"><a href="#不该出现的问题" class="headerlink" title="不该出现的问题"></a>不该出现的问题</h1><p>1.在录制阶段，JMeter可以记录访问百度等动作，却偏偏无法能记录Ecshop的任何动作。<br>问题原因：在火狐浏览器设置代理服务器时，手动配置代理中的最后一个“不使用代理”里没有删掉默认填写的“localhost”以及“127.0.0.1:1024”。<br><img src="/images/ST_Lab3JMeter/770BB61FCCBFE7CE1C7E0F3942535002.jpg" alt="error.jpg"><br>把这些清空就好了。</p>
<p>2.察看树结果里category和good报错，聚合报告里显示所有category和good的出错率是100%。<br>详细信息如下图所示：<br><img src="/images/ST_Lab3JMeter/1A4E0AF8D0582B6EB9C2951B5D831A01.jpg" alt="error1.jpg"><br><img src="/images/ST_Lab3JMeter/90DA88A5B37D07BADA504DD4E0949B3B.jpg" alt="error2.jpg"><br><img src="/images/ST_Lab3JMeter/229B24C589D6F892931FB0915FBACF34.jpg" alt="error3.jpg"><br><img src="/images/ST_Lab3JMeter/D606D4F984B61ACB9FF839E020FB4AF7.jpg" alt="error4.jpg"><br>问题原因：经过分析，我发现JMeter获取的所有类型和货品的id号都显示为&lt;EOF&gt;，也就意味着程序获取的数据都为空。后来经过漫长的检查发现是在CSV Data Set Config中的 Filename:  <code>./data/catgd.csv</code> 写成了 <code>../data/catgd.csv</code> 因此JMeter并没有识别到该catgd.csv文件。</p>
<p>解决方案：在BeanShell断言里else部分补充为</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">	Failure = <span class="keyword">true</span>;</span><br><span class="line">	FailureMessage =<span class="string">&quot;Not Found&quot;</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样当没有识别到该文件时，就会出现断言错误结果：<br><img src="/images/ST_Lab3JMeter/271894030CFFA2A833F56DAE478E5B87.jpg" alt="error5.jpg"><br>最后把 CSV Data Set Config中的 Filename:  <code>./data/catgd.csv</code> 修改正确。</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/SoftwareTest/" rel="tag"># SoftwareTest</a>
              <a href="/tags/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E4%B8%8A%E6%9C%BA/" rel="tag"># 软件测试上机</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2018/04/13/ST_Lab2Selenium/" rel="prev" title="【软件测试上机】2 Selenium">
      <i class="fa fa-chevron-left"></i> 【软件测试上机】2 Selenium
    </a></div>
      <div class="post-nav-item">
    <a href="/2018/05/03/ST_Lab4JPF/" rel="next" title="【软件测试上机】4 Java PathFinder">
      【软件测试上机】4 Java PathFinder <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%9E%E9%AA%8C%E7%9B%AE%E6%A0%87"><span class="nav-number">1.</span> <span class="nav-text">实验目标</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="nav-number">2.</span> <span class="nav-text">准备工作</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9C%8B%E6%95%99%E7%A8%8B%E8%A7%86%E9%A2%91"><span class="nav-number">2.1.</span> <span class="nav-text">看教程视频</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD-CentOS"><span class="nav-number">2.2.</span> <span class="nav-text">下载 CentOS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-CentOS-7-%E8%99%9A%E6%8B%9F%E6%9C%BA"><span class="nav-number">2.3.</span> <span class="nav-text">安装 CentOS 7 虚拟机</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-MySQl"><span class="nav-number">2.4.</span> <span class="nav-text">安装 MySQl</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-php"><span class="nav-number">2.5.</span> <span class="nav-text">安装 php</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7"><span class="nav-number">2.6.</span> <span class="nav-text">性能测试相关工具</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#top-%E7%9B%91%E6%8E%A7%E6%AF%8F%E4%B8%80%E4%B8%AA%E8%BF%9B%E7%A8%8B%E7%9A%84%E8%B5%84%E6%BA%90%E5%8D%A0%E7%94%A8"><span class="nav-number">2.6.1.</span> <span class="nav-text">top 监控每一个进程的资源占用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sysstat-%E7%BB%9F%E8%AE%A1%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%90%84%E7%A7%8D%E8%B5%84%E6%BA%90%E7%9A%84%E5%8D%A0%E7%94%A8%E6%83%85%E5%86%B5"><span class="nav-number">2.6.2.</span> <span class="nav-text">sysstat 统计系统的各种资源的占用情况</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#fio-%E8%AF%84%E4%BC%B0%E7%A3%81%E7%9B%98%E8%AF%BB%E5%86%99%E6%80%A7%E8%83%BD%E6%9E%81%E9%99%90"><span class="nav-number">2.6.3.</span> <span class="nav-text">fio 评估磁盘读写性能极限</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ECShop-%E7%BD%91%E4%B8%8A%E5%95%86%E5%BA%97%E7%B3%BB%E7%BB%9F"><span class="nav-number">2.7.</span> <span class="nav-text">ECShop 网上商店系统</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JMeter-%E5%8E%8B%E5%8A%9B%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7"><span class="nav-number">2.8.</span> <span class="nav-text">JMeter 压力测试工具</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8JMeter"><span class="nav-number">3.</span> <span class="nav-text">使用JMeter</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BD%95%E5%88%B6"><span class="nav-number">3.1.</span> <span class="nav-text">录制</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9E%E6%94%BE"><span class="nav-number">3.2.</span> <span class="nav-text">回放</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95%E8%84%9A%E6%9C%AC%E5%8F%82%E6%95%B0%E5%8C%96"><span class="nav-number">4.</span> <span class="nav-text">测试脚本参数化</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%94%A8PostProcessor%E8%8E%B7%E5%8F%96%E5%93%8D%E5%BA%94%E4%B8%AD%E7%9A%84%E5%85%B3%E9%94%AE%E6%95%B0%E6%8D%AE"><span class="nav-number">5.</span> <span class="nav-text">用PostProcessor获取响应中的关键数据</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-10%E7%9A%84%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C"><span class="nav-number">6.</span> <span class="nav-text">5*10的测试结果</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#50-20%E7%9A%84%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C"><span class="nav-number">7.</span> <span class="nav-text">50*20的测试结果</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#top"><span class="nav-number">7.1.</span> <span class="nav-text">top</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%BB%E5%8A%A1%E6%95%B0%EF%BC%8C%E7%B9%81%E9%87%8D%E7%A8%8B%E5%BA%A6%EF%BC%9A"><span class="nav-number">7.2.</span> <span class="nav-text">任务数，繁重程度：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8BCPU%E5%90%84%E9%A1%B9%E6%8C%87%E6%A0%87%E5%8D%A0%E7%94%A8%E7%9A%84%E7%99%BE%E5%88%86%E6%AF%94"><span class="nav-number">7.3.</span> <span class="nav-text">查看CPU各项指标占用的百分比</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%86%85%E5%AD%98%E5%AE%9E%E9%99%85%E5%8D%A0%E7%94%A8%E7%99%BE%E5%88%86%E6%AF%94"><span class="nav-number">7.4.</span> <span class="nav-text">内存实际占用百分比</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BB%E5%AD%98-%E5%86%85%E5%AD%98-%E4%B8%8E%E5%9D%97%E8%AE%BE%E5%A4%87-%E7%A1%AC%E7%9B%98-%E4%B9%8B%E9%97%B4%E6%8D%A2%E9%A1%B5%E9%A2%91%E7%B9%81%E7%A8%8B%E5%BA%A6"><span class="nav-number">7.5.</span> <span class="nav-text">主存(内存)与块设备(硬盘)之间换页频繁程度</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E4%B8%AD-%E4%BB%8E%E5%9D%97%E8%AE%BE%E5%A4%87swap%E5%8C%BA%E4%B8%AD%E8%AF%BB%E5%85%A5-%E8%AF%BB%E5%87%BA%E7%9A%84%E9%A1%B5%E6%95%B0"><span class="nav-number">7.6.</span> <span class="nav-text">虚拟内存中,从块设备swap区中读入&#x2F;读出的页数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IO%E7%9A%84%E9%A2%91%E7%B9%81%E7%A8%8B%E5%BA%A6"><span class="nav-number">7.7.</span> <span class="nav-text">IO的频繁程度</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%87%E5%8C%BA"><span class="nav-number">7.8.</span> <span class="nav-text">扇区</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%87%BA%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">8.</span> <span class="nav-text">出现的问题</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%8D%E8%AF%A5%E5%87%BA%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">9.</span> <span class="nav-text">不该出现的问题</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="VikingWang"
      src="/images/avatar.JPG">
  <p class="site-author-name" itemprop="name">VikingWang</p>
  <div class="site-description" itemprop="description">这是一个需要耐心等着加载的博客</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">39</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">21</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2018 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">VikingWang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
